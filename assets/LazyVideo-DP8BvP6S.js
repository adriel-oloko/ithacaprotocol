import{r as s,aF as R,b1 as b}from"./index-BCy5xNdd.js";const y=({webmSrc:o,mp4Src:a,className:l,autoPlay:i=!0,muted:p=!0,loop:v=!0,playsInline:E=!0,onLoad:c,posterImage:h})=>{const t=s.useRef(null),[d,m]=s.useState(!1),[x,I]=s.useState(!1),n=s.useRef(null);return s.useEffect(()=>(n.current=new IntersectionObserver(r=>{r.forEach(u=>{var e;u.isIntersecting&&(m(!0),(e=n.current)==null||e.disconnect())})},{rootMargin:"200px 0px",threshold:.1}),t.current&&n.current.observe(t.current),()=>{var r;(r=n.current)==null||r.disconnect()}),[]),s.useEffect(()=>{if(d&&t.current&&!x){const r=[];if(o){const e=document.createElement("source");e.src=o,e.type="video/webm",r.push(e)}if(a){const e=document.createElement("source");e.src=a,e.type="video/mp4",r.push(e)}r.forEach(e=>{var f;(f=t.current)==null||f.appendChild(e)}),t.current.load(),t.current.playbackRate=1.3;const u=()=>{var e;I(!0),c==null||c(),i&&((e=t.current)==null||e.play().catch(console.error))};return t.current.addEventListener("loadeddata",u),()=>{var e;(e=t.current)==null||e.removeEventListener("loadeddata",u)}}},[d,o,a,i,c]),R.jsx("video",{ref:t,className:b(l),muted:p,loop:v,playsInline:E,poster:h})};export{y as L};
